title = "index"
url = "/filtered"
layout = "default"
is_hidden = 0
==
<?php
use dominik\projects\Models\places;
	use dominik\projects\Models\cells;
	function onStart() { $this->prepareVars();}
	function onFilterPlaces() { $this->prepareVars();}

	function prepareVars() {
	$options = post('Filter', []);
	$this['places'] = Places::listFrontEnd($options);
	$this['cells'] = Cells::all();
	}
?>
==
<h2 class="ui header" style="margin-top:40px;">Filtered Places</h2>
<div class="row justify-content-md-center">
	<div class="col-sm-4">
	{{ form_ajax('onFilterPlaces',{ update: { 'places/places': '#partialPlaces'}})}}
		<div id="PlacesFilter" class="places-filter ui form">
			<div class="ui segment vertial">
				<label>Klatka</label>
				{% for cell in cells %}
					<div class="field">
						<div class="checkbox">
						<label>
							<input type="checkbox" name="Filter[cells][]" value="{{ cell.id }}" />
							{{cell.notation}} {{cell.id}}</label>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>

	{{ form_close() }}
	</div>

	<div class="col-sm-8">
	<div id="partialPlaces">
		{% partial 'places/places' %}
	</div>
	</div>
</div>